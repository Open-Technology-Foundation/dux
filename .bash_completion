#!/bin/bash
set -euo pipefail

# Bash completion for dir-sizes script

_dir_sizes() {
  local cur prev opts
  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"
  prev="${COMP_WORDS[COMP_CWORD-1]}"

  # Options for dir-sizes
  opts="-h --help -V --version"

  # If previous word is the command itself or an option
  case "$prev" in
    dir-sizes|-h|--help|-V|--version)
      # Complete with options or directories
      if [[ "$cur" == -* ]]; then
        COMPREPLY=($(compgen -W "$opts" -- "$cur"))
      else
        # Complete with directories only
        COMPREPLY=($(compgen -d -- "$cur"))
      fi
      return 0
      ;;
  esac

  # Default completion for directories
  COMPREPLY=($(compgen -d -- "$cur"))
}

# Register completion function
complete -F _dir_sizes dir-sizes

#fin